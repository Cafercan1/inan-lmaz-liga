<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>KayÄ±t / GiriÅŸ</title>
<script type="module">
  // ğŸ”¹ MODÃœLER FIREBASE
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCsgGry8f3TkjZF8ejJjawb8vO1yhpQH8s",
    authDomain: "lig-a-794ad.firebaseapp.com",
    projectId: "lig-a-794ad",
    storageBucket: "lig-a-794ad.appspot.com",
    messagingSenderId: "868678155723",
    appId: "1:868678155723:web:cba4e929899704523aca4e",
    measurementId: "G-HQW4EHNHBE"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.registerUser = async () => {
    const u = document.getElementById("regUser").value.trim();
    const p = document.getElementById("regPass").value.trim();
    const t1 = document.getElementById("regTeam1").value;
    const t2 = document.getElementById("regTeam2").value;
    const msg = document.getElementById("msg");

    if(!u || !p || !t1){ msg.innerText="KullanÄ±cÄ± adÄ±, ÅŸifre ve en az 1 takÄ±m gerekli!"; return;}
    if(t1===t2 && t2!==""){ msg.innerText="AynÄ± takÄ±mÄ± iki kez seÃ§emezsin"; return;}

    const docRef = doc(db, "users", u);
    const docSnap = await getDoc(docRef);
    if(docSnap.exists()){ msg.innerText="KullanÄ±cÄ± zaten var!"; return; }

    await setDoc(docRef, {
      username:u,
      password:p,
      team1:t1,
      team2:t2,
      created:new Date()
    });

    msg.innerText = "KayÄ±t baÅŸarÄ±lÄ± âœ…";
  };

  window.loginUser = async () => {
    const u = document.getElementById("logUser").value.trim();
    const p = document.getElementById("logPass").value.trim();
    const msg = document.getElementById("msg");

    const docRef = doc(db, "users", u);
    const docSnap = await getDoc(docRef);

    if(!docSnap.exists() || docSnap.data().password !== p){
      msg.innerText="HatalÄ± giriÅŸ âŒ"; return;
    }

    localStorage.setItem("currentUser", u);
    window.location = "site.html";
  };
</script>
<style>
body{font-family:Arial;padding:40px}
input,button,select{display:block;margin:10px 0;padding:8px;width:250px}
</style>
</head>
<body>

<h2>KayÄ±t Ol</h2>
<input id="regUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="regPass" type="password" placeholder="Åifre">
<select id="regTeam1">
  <option value="">TakÄ±m 1 SeÃ§</option>
  <option value="Marsilya">Marsilya</option>
  <option value="Juventus">Juventus</option>
  <option value="Borussia Dortmund">Borussia Dortmund</option>
  <option value="Ä°nter">Ä°nter</option>
  <option value="Lyon">Lyon</option>
  <option value="Liverpool">Liverpool</option>
  <option value="Atletico Madrid">Atletico Madrid</option>
  <option value="Bayer Leverkusen">Bayer Leverkusen</option>
  <option value="Sevilla">Sevilla</option>
  <option value="Arsenal">Arsenal</option>
</select>
<select id="regTeam2">
  <option value="">TakÄ±m 2 SeÃ§ (Opsiyonel)</option>
  <option value="Marsilya">Marsilya</option>
  <option value="Juventus">Juventus</option>
  <option value="Borussia Dortmund">Borussia Dortmund</option>
  <option value="Ä°nter">Ä°nter</option>
  <option value="Lyon">Lyon</option>
  <option value="Liverpool">Liverpool</option>
  <option value="Atletico Madrid">Atletico Madrid</option>
  <option value="Bayer Leverkusen">Bayer Leverkusen</option>
  <option value="Sevilla">Sevilla</option>
  <option value="Arsenal">Arsenal</option>
</select>
<button onclick="registerUser()">KayÄ±t Ol</button>

<h2>GiriÅŸ Yap</h2>
<input id="logUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="logPass" type="password" placeholder="Åifre">
<button onclick="loginUser()">GiriÅŸ</button>

<p id="msg"></p>

</body>
</html>
